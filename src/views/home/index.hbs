<body>
    <div class="az-header">
      <div class="container">
        <div class="az-header-left">
          <a href="index.html" class="az-logo"><span></span> azia</a>
          <a href="" id="azMenuShow" class="az-header-menu-icon d-lg-none"><span></span></a>
        </div><!-- az-header-left -->
        <div class="az-header-menu">
          <div class="az-header-menu-header">
            <a href="index.html" class="az-logo"><span></span> azia</a>
            <a href="" class="close">&times;</a>
          </div><!-- az-header-menu-header -->
          <ul class="nav">
            <li class="nav-item active show">
              <a href="index.html" class="nav-link"><i class="typcn typcn-chart-area-outline"></i> Trang chủ</a>
            </li>
            <li class="nav-item">
              <a href="" class="nav-link with-sub"><i class="typcn typcn-document"></i> Pages</a>
              <nav class="az-menu-sub">
                <a href="page-signin.html" class="nav-link">Sign In</a>
                <a href="page-signup.html" class="nav-link">Sign Up</a>
              </nav>
            </li>
            <li class="nav-item">
              <a href="chart-chartjs.html" class="nav-link"><i class="typcn typcn-chart-bar-outline"></i> Charts</a>
            </li>
            <li class="nav-item">
              <a href="form-elements.html" class="nav-link"><i class="typcn typcn-chart-bar-outline"></i> Forms</a>
            </li>
            <li class="nav-item">
              <a href="" class="nav-link with-sub"><i class="typcn typcn-book"></i> Components</a>
              <div class="az-menu-sub">
                <div class="container">
                  <div>
                    <nav class="nav">
                      <a href="elem-buttons.html" class="nav-link">Buttons</a>
                      <a href="elem-dropdown.html" class="nav-link">Dropdown</a>
                      <a href="elem-icons.html" class="nav-link">Icons</a>
                      <a href="table-basic.html" class="nav-link">Table</a>
                    </nav>
                  </div>
                </div><!-- container -->
              </div>
            </li>
          </ul>
        </div><!-- az-header-menu -->
          <a class="nav-link"><i class="typcn typcn-chart-bar-outline"></i><button {{checkRole user.role}} class="btn btn-indigo btn-rounded btn-block" onclick="onWaitAccessAuthor()">Xin quyền làm tác giả</button></a>
          <div class="dropdown az-profile-menu">
            <a href="" class="az-img-user"><img src="{{user.image}}" alt=""></a>
          </div>
        </div><!-- az-header-right -->
      </div><!-- container -->
    </div><!-- az-header -->  
    <div class="table-responsive">
            <table class="table table-bordered mg-b-0">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Tên sách</th>
                  <th>Thể loại</th>
                  <th>Salary</th>
                </tr>
              </thead>
              <tbody style="font-size: 15px;">
                {{#each books}}
                <tr id="{{this._id}}">
                  <th scope="row">{{books._id}}</th>
                  <td>{{this.name}}</td>
                  <td>{{this.categoryId.name}}</td>
                  <td></td>
                </tr>
                {{/each}}
              </tbody>
            </table>
    </div><!-- table-responsive -->
</body>
<script>
  const fetchAPI = async (url, option) => {
      const res = await fetch(url, option);
      return res.json();
  }

  const hiddenButton = (role) => {
    if(role == 1){
      document.querySelector('.btn-indigo').style.display = 'none';
    }else if(role >= 2){
      document.querySelector('.btn-indigo').style.display = 'block';
    }
  }

  const onWaitAccessAuthor = async () => {
                  const url = `/api/accounts/accessAuthor`; 
                 
                  const option = {
                         method: 'post', 
                         headers: {'Content-Type':'application/json'}, 
                       
                  } 
                   try {
                        const result = await fetchAPI(url, option);
                        try {
                        swal(`Thông báo`, `Gửi yêu cầu thành công, vui lòng đợi duyệt`, `success`);
                        } catch (e) { swal(`Lỗi: ${e.message}`) }
                       } catch (e) {
                          console.log(e);
                       }
      }
</script>